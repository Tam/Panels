{"version":3,"sources":["panels.js"],"names":["window","Helpers","mergeObject","a","b","attrname","c","hasOwnProperty","Ajax","opts","self","this","options","_defaults","body","indexOf","constructor","name","JSON","stringify","req","XMLHttpRequest","open","method","url","type","setRequestHeader","contentType","key","headers","onerror","error","onload","status","success","parse","responseText","send","Panels","router","Grapnel","ajax","Panel","prototype","app","debug","console","log","args","Array","slice","call","arguments","shift","concat","apply","version","Vue","e","baseEl","document","preload","v","logic","_verifyOpts","_storeTemplate","parentEl","route","template","templateUrl","append","appendChild","templateLogic","tag","o","valid","HTMLElement","createElement","innerHTML","onOpen","parent","getElementsByTagName","onClose","close"],"mappings":"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","file":"panels.min.js","sourcesContent":["(function (window) {\n\n\t/**\n\t * Helpers\n\t */\n\tvar Helpers = {\n\t\tmergeObject: function (a, b) {\n\t\t\tvar c = {}, attrname;\n\t\t\tfor (attrname in a) {\n\t\t\t\tif (a.hasOwnProperty(attrname))\n\t\t\t\t\tc[attrname] = a[attrname];\n\t\t\t}\n\t\t\tfor (attrname in b) {\n\t\t\t\tif (b.hasOwnProperty(attrname))\n\t\t\t\t\tc[attrname] = b[attrname];\n\t\t\t}\n\t\t\treturn c;\n\t\t}\n\t};\n\n\t/**\n\t * Ajax\n\t * TODO: new Ajax(opts) (can set endpoint), return current Ajax func\n\t *\n\t * @param {object} opts - Options\n\t * @constructor\n\t */\n\tvar Ajax = function (opts) {\n\t\t// TODO: Implement using a promise (native w/ polyfill https://github.com/stefanpenner/es6-promise)\n\t\t// TODO: Get ajax progress % for loading bar\n\t\t// TODO: Add option to include middleware (i.e. auth check)\n\t\tvar self = this;\n\t\tthis.options = Helpers.mergeObject(Ajax._defaults, opts);\n\n\t\t// Format body\n\t\tvar body = this.options.body;\n\t\tif (body) body = ([\"DOMString\", \"String\", \"Blob\", \"ArrayBuffer\", \"ArrayBufferView\", \"Document\", \"Text\", \"FormData\"].indexOf(body.constructor.name) > -1) ? body : JSON.stringify(body);\n\n\t\t// Open Request\n\t\tvar req = new XMLHttpRequest();\n\t\treq.open(this.options.method, this.options.url, true);\n\n\t\t// Set Content Type\n\t\tif (this.options.body.constructor.name === \"Blob\") {\n\t\t\tif (body.type) req.setRequestHeader(\"Content-Type\", body.type);\n\t\t} else if (this.options.body.constructor.name === \"Document\") {\n\t\t\tif (body.contentType) req.setRequestHeader(\"Content-Type\", body.contentType);\n\t\t} else if (this.options.body.constructor.name === \"FormData\") {\n\t\t\treq.setRequestHeader(\"Content-Type\", \"multipart/form-data\");\n\t\t} else if (this.options.body.constructor.name === \"Object\") {\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\n\t\t} else if ([\"String\", \"Text\"].indexOf(this.options.body.constructor.name) > -1) {\n\t\t\treq.setRequestHeader(\"Content-Type\", \"text/plain\");\n\t\t}\n\n\t\t// User defined headers (can override Content-Type)\n\t\tfor (var key in this.options.headers) {\n\t\t\tif (this.options.headers.hasOwnProperty(key))\n\t\t\t\treq.setRequestHeader(key, options.headers[key]);\n\t\t}\n\n\t\t// On Error Callback // TODO: Replace w/ promise\n\t\treq.onerror = function () {\n\t\t\tif (self.options.error)\n\t\t\t\tself.options.error(req);\n\t\t};\n\n\t\t// On Load Callback // TODO: Replace w/ promise\n\t\treq.onload = function () {\n\t\t\tif (req.status >= 200 && req.status < 400) {\n\t\t\t\tif (self.options.success)\n\t\t\t\t\tself.options.success(req, JSON.parse(req.responseText));\n\t\t\t} else {\n\t\t\t\tif (self.options.error)\n\t\t\t\t\tself.options.error(req, JSON.parse(req.responseText));\n\t\t\t}\n\t\t};\n\n\t\t// Send\n\t\tif (body) req.send(body);\n\t\telse req.send();\n\t};\n\n\tAjax._defaults = {\n\t\tmethod: 'GET',\n\t\turl: '',\n\t\tbody: null,\n\t\theaders: {},\n\t\tsuccess: function () {},\n\t\terror: function () {}\n\t};\n\n\t/**\n\t * Panels\n\t *\n\t * @param {object} opts - Options Object\n\t * @constructor\n\t */\n\tvar Panels = function (opts) {\n\t\t// Options\n\t\tthis.options = Helpers.mergeObject(Panels._defaults, opts);\n\n\t\t// Router\n\t\tthis.router = new Grapnel();\n\n\t\t// Ajax\n\t\tthis.ajax = Ajax;\n\n\t\t// Pass self to Panel\n\t\tthis.Panel.prototype.app = this;\n\n\t\tif (this.options.debug && window.console) {\n\t\t\tthis.log = function (type) {\n\t\t\t\tvar args = [\"%cPanels:%c\", \"font-weight:bold;\", \"font-weight:normal;\"],\n\t\t\t\t\ta = Array.prototype.slice.call(arguments);\n\t\t\t\ta.shift();\n\t\t\t\targs = args.concat(a);\n\t\t\t\tconsole[type].apply(console, args);\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tconsole.log.apply(console, [\n\t\t\t\t\t\"%c %c %c %c  Panels %c| v\" + Panels.version + \"  %c %c %c\" +\n\t\t\t\t\t\"\\n%c Vue:     %c\" + (typeof window.Vue !== \"undefined\") +\n\t\t\t\t\t\"\\n%c Grapnel: %c\" + (typeof window.Grapnel !== \"undefined\"),\n\n\t\t\t\t\t\"background:rgba(180,214,65,0.3);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.6);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.8);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"color:#ffffff;background:rgba(180,214,65,1);font-weight:bold;padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"color:#ffffff;background:rgba(180,214,65,1);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.8);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.6);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.3);padding-top:2px;padding-bottom:2px;\",\n\n\t\t\t\t\t\"color:#ccc;line-height:2em;\",\n\t\t\t\t\t\"color:\" + (typeof window.Vue === \"undefined\" ? \"red\" : \"orange\") + \";font-weight:bold;\",\n\n\t\t\t\t\t\"color:#ccc;\",\n\t\t\t\t\t\"color:\" + (typeof window.Grapnel === \"undefined\" ? \"red\" : \"orange\") + \";font-weight:bold;\"\n\t\t\t\t]);\n\t\t\t} catch (e) {}\n\t\t} else {\n\t\t\tthis.log = function () {};\n\t\t}\n\t};\n\n\t// Version\n\tPanels.version = '0.0.1';\n\n\t// Default Options\n\tPanels._defaults = {\n\t\tdebug: false,\n\t\tbaseEl: document.body,\n\t\tpreload: false\n\t};\n\n\n\t/**\n\t * Panel\n\t *\n\t * @param {object} opts  - Options\n\t * @param {object} v     - Vue Options\n\t * @param {object} logic - Panel Logic\n\t * @constructor\n\t */\n\tvar Panel = function (opts, v, logic) {\n\t\tthis.options = Helpers.mergeObject(Panel._defaults, opts);\n\n\t\tif (this._verifyOpts()) {\n\t\t\t// Template\n\t\t\tif (this.app.options.preload)\n\t\t\t\tthis._storeTemplate();\n\n\t\t\t// Route\n\t\t\t// TODO: Add route to Panels\n\n\t\t\t// Vue\n\t\t\tthis.v = new Vue(v);\n\n\t\t\t// Logic\n\t\t\tthis.logic = logic;\n\t\t}\n\t};\n\n\t// Default Options\n\tPanel._defaults = {\n\t\tparentEl: null,\n\t\troute: null, // TODO: Remove Route from config into Panels main or arg\n\t\ttemplate: null,\n\t\ttemplateUrl: null,\n\t\tappend: false,\n\t\tappendChild: false,\n\t\ttemplateLogic: false,\n\t\ttag: 'div'\n\t};\n\n\t/**\n\t * Verify the settings\n\t *\n\t * @returns {boolean}\n\t * @private\n\t */\n\tPanel.prototype._verifyOpts = function () {\n\t\tvar o = this.options,\n\t\t\tvalid = true;\n\n\t\t// Template\n\t\tif (o.template === null && o.templateUrl === null) {\n\t\t\tvalid = false;\n\t\t\tthis.app.log('error', 'You must define a Template or TemplateUrl');\n\t\t}\n\n\t\tif (o.template !== null && (!(o.template instanceof HTMLElement) || typeof o.template !== \"string\")) {\n\t\t\tvalid = false;\n\t\t\tthis.app.log('error', 'Template set to unknown type', '\"' + typeof o.template + '\"');\n\t\t}\n\n\t\tif (o.templateUrl !== null && typeof o.templateUrl !== \"string\") {\n\t\t\tvalid = false;\n\t\t\tthis.app.log('error', 'TemplateUrl set to unknown type', '\"' + typeof o.templateUrl + '\"');\n\t\t}\n\n\t\t// TODO: Finish\n\n\t\treturn valid;\n\t};\n\n\t/**\n\t * Store the template\n\t */\n\tPanel.prototype._storeTemplate = function () {\n\t\tif (this.options.templateUrl !== null) {\n\t\t\tvar req = new XMLHttpRequest(),\n\t\t\t\tself = this;\n\t\t\treq.open('GET', this.options.templateUrl, true);\n\t\t\treq.onload = function () {\n\t\t\t\tif (req.status >= 200 && req.status < 400) {\n\t\t\t\t\t// TODO: Get template (& logic) from file\n\t\t\t\t\tself.template = document.createElement(self.options.tag);\n\t\t\t\t\tself.template.innerHTML = req.responseText;\n\t\t\t\t} else {\n\t\t\t\t\tself.app.log('error', \"Unable to load template file:\", self.options.templateUrl);\n\t\t\t\t}\n\t\t\t};\n\t\t\treq.send();\n\t\t} else {\n\t\t\tthis.template = document.createElement(this.options.tag);\n\t\t\tthis.template.innerHTML = this.options.template;\n\t\t}\n\t};\n\n\t// Panel Events\n\t// Open\n\tPanel.prototype.onOpen = function () {\n\t\t// Ensure we have a template\n\t\tif (typeof this.template === \"undefined\")\n\t\t\tthis._storeTemplate();\n\n\t\tif (this.template) {\n\t\t\tvar parent = this.options.parentEl ? this.options.parentEl : this.app.options.baseEl;\n\n\t\t\tif (this.options.append) {\n\t\t\t\tparent.innerHTML += this.template.innerHTML;\n\t\t\t} else if (this.options.appendChild) {\n\t\t\t\tif (parent.getElementsByTagName('panel-output')) {\n\t\t\t\t\tparent.getElementsByTagName('panel-output')[0].appendChild(this.template);\n\t\t\t\t} else {\n\t\t\t\t\tparent.appendChild(this.template);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// TODO: Store currently open panel (allow for multiple levels (based off route) -1 means ignore (i.e. modals))\n\t\t\t\t// this.app.panels[currentLevel].close(); // Loop through children and close them first\n\t\t\t\tparent.innerHTML = this.template.innerHTML;\n\t\t\t}\n\n\t\t\tif (typeof this.logic.onOpen === \"function\")\n\t\t\t\tthis.logic.onOpen();\n\t\t}\n\t};\n\n\t// Close\n\tPanel.prototype.onClose = function () {\n\t\tif (typeof this.logic.onClose === \"function\")\n\t\t\tthis.logic.onClose();\n\t};\n\n\t// Panel Controls\n\tPanel.prototype.open = function () {\n\t\tthis.onOpen();\n\t};\n\n\tPanel.prototype.close = function () {\n\t\tthis.onClose();\n\t};\n\n\t// Add to Panels\n\tPanels.prototype.Panel = Panel;\n\n\t// Export\n\twindow.Panels = Panels;\n\n})(window);"],"sourceRoot":"/source/"}