{"version":3,"sources":["panels.js"],"names":["window","Helpers","mergeObject","a","b","attrname","c","hasOwnProperty","Ajax","opts","self","this","options","_defaults","body","indexOf","JSON","stringify","req","XMLHttpRequest","open","method","url","key","headers","setRequestHeader","onerror","error","onload","status","success","parse","responseText","send","Panels","router","Grapnel","ajax","Panel","prototype","app","debug","console","log","type","args","Array","slice","call","arguments","shift","concat","apply","version","Vue","e","baseEl","document","preload","v","logic","_verifyOpts","_storeTemplate","parentEl","route","template","templateUrl","append","appendChild","templateLogic","tag","o","valid","HTMLElement","createElement","innerHTML","onOpen","parent","getElementsByTagName","onClose","close"],"mappings":"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","file":"panels.min.js","sourcesContent":["(function (window) {\n\n\t/**\n\t * Helpers\n\t */\n\tvar Helpers = {\n\t\tmergeObject: function (a, b) {\n\t\t\tvar c = {}, attrname;\n\t\t\tfor (attrname in a) {\n\t\t\t\tif (a.hasOwnProperty(attrname))\n\t\t\t\t\tc[attrname] = a[attrname];\n\t\t\t}\n\t\t\tfor (attrname in b) {\n\t\t\t\tif (b.hasOwnProperty(attrname))\n\t\t\t\t\tc[attrname] = b[attrname];\n\t\t\t}\n\t\t\treturn c;\n\t\t}\n\t};\n\n\t/**\n\t * Ajax\n\t *\n\t * @param {object} opts - Options\n\t * @constructor\n\t */\n\tvar Ajax = function (opts) {\n\t\t// TODO: Implement using a promise\n\t\t// TODO: Get ajax progress % for loading bar\n\t\tvar self = this;\n\t\tthis.options = Helpers.mergeObject(Ajax._defaults, opts);\n\n\t\tvar body = this.options.body;\n\t\tif (body) body = ([\"string\", \"blob\", \"arraybuffer\", \"arraybufferview\", \"document\", \"text\", \"formdata\"].indexOf(typeof body) > -1) ? body : JSON.stringify(body);\n\n\t\tvar req = new XMLHttpRequest();\n\t\treq.open(this.options.method, this.options.url, true);\n\n\t\t// TODO: Set Content-Type header according to body type\n\n\t\tfor (var key in this.options.headers) {\n\t\t\tif (this.options.headers.hasOwnProperty(key))\n\t\t\t\treq.setRequestHeader(key, options.headers[key]);\n\t\t}\n\n\t\treq.onerror = function () {\n\t\t\tif (self.options.error)\n\t\t\t\tself.options.error(req);\n\t\t};\n\n\t\treq.onload = function () {\n\t\t\tif (req.status >= 200 && req.status < 400) {\n\t\t\t\tif (self.options.success)\n\t\t\t\t\tself.options.success(req, JSON.parse(req.responseText));\n\t\t\t} else {\n\t\t\t\tif (self.options.error)\n\t\t\t\t\tself.options.error(req, JSON.parse(req.responseText));\n\t\t\t}\n\t\t};\n\n\t\tif (body) req.send(body);\n\t\telse req.send();\n\t};\n\n\tAjax._defaults = {\n\t\tmethod: 'GET',\n\t\turl: '',\n\t\tbody: null,\n\t\theaders: {},\n\t\tsuccess: function () {},\n\t\terror: function () {}\n\t};\n\n\t/**\n\t * Panels\n\t *\n\t * @param {object} opts - Options Object\n\t * @constructor\n\t */\n\tvar Panels = function (opts) {\n\t\t// Options\n\t\tthis.options = Helpers.mergeObject(Panels._defaults, opts);\n\n\t\t// Router\n\t\tthis.router = new Grapnel();\n\n\t\t// Ajax\n\t\tthis.ajax = Ajax;\n\n\t\t// Pass self to Panel\n\t\tthis.Panel.prototype.app = this;\n\n\t\tif (this.options.debug && window.console) {\n\t\t\tthis.log = function (type) {\n\t\t\t\tvar args = [\"%cPanels:%c\", \"font-weight:bold;\", \"font-weight:normal;\"],\n\t\t\t\t\ta = Array.prototype.slice.call(arguments);\n\t\t\t\ta.shift();\n\t\t\t\targs = args.concat(a);\n\t\t\t\tconsole[type].apply(console, args);\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tconsole.log.apply(console, [\n\t\t\t\t\t\"%c %c %c %c  Panels %c| v\" + Panels.version + \"  %c %c %c\" +\n\t\t\t\t\t\"\\n%c Vue:     %c\" + (typeof window.Vue !== \"undefined\") +\n\t\t\t\t\t\"\\n%c Grapnel: %c\" + (typeof window.Grapnel !== \"undefined\"),\n\n\t\t\t\t\t\"background:rgba(180,214,65,0.3);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.6);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.8);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"color:#ffffff;background:rgba(180,214,65,1);font-weight:bold;padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"color:#ffffff;background:rgba(180,214,65,1);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.8);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.6);padding-top:2px;padding-bottom:2px;\",\n\t\t\t\t\t\"background:rgba(180,214,65,0.3);padding-top:2px;padding-bottom:2px;\",\n\n\t\t\t\t\t\"color:#ccc;line-height:2em;\",\n\t\t\t\t\t\"color:\" + (typeof window.Vue === \"undefined\" ? \"red\" : \"orange\") + \";font-weight:bold;\",\n\n\t\t\t\t\t\"color:#ccc;\",\n\t\t\t\t\t\"color:\" + (typeof window.Grapnel === \"undefined\" ? \"red\" : \"orange\") + \";font-weight:bold;\"\n\t\t\t\t]);\n\t\t\t} catch (e) {}\n\t\t} else {\n\t\t\tthis.log = function () {};\n\t\t}\n\t};\n\n\t// Version\n\tPanels.version = '0.0.1';\n\n\t// Default Options\n\tPanels._defaults = {\n\t\tdebug: false,\n\t\tbaseEl: document.body,\n\t\tpreload: false\n\t};\n\n\n\t/**\n\t * Panel\n\t *\n\t * @param {object} opts  - Options\n\t * @param {object} v     - Vue Options\n\t * @param {object} logic - Panel Logic\n\t * @constructor\n\t */\n\tvar Panel = function (opts, v, logic) {\n\t\tthis.options = Helpers.mergeObject(Panel._defaults, opts);\n\n\t\tif (this._verifyOpts()) {\n\t\t\t// Template\n\t\t\tif (this.app.options.preload)\n\t\t\t\tthis._storeTemplate();\n\n\t\t\t// Route\n\t\t\t// TODO: Add route to Panels\n\n\t\t\t// Vue\n\t\t\tthis.v = new Vue(v);\n\n\t\t\t// Logic\n\t\t\tthis.logic = logic;\n\t\t}\n\t};\n\n\t// Default Options\n\tPanel._defaults = {\n\t\tparentEl: null,\n\t\troute: null, // TODO: Remove Route from config into Panels main or arg\n\t\ttemplate: null,\n\t\ttemplateUrl: null,\n\t\tappend: false,\n\t\tappendChild: false,\n\t\ttemplateLogic: false,\n\t\ttag: 'div'\n\t};\n\n\t/**\n\t * Verify the settings\n\t *\n\t * @returns {boolean}\n\t * @private\n\t */\n\tPanel.prototype._verifyOpts = function () {\n\t\tvar o = this.options,\n\t\t\tvalid = true;\n\n\t\t// Template\n\t\tif (o.template === null && o.templateUrl === null) {\n\t\t\tvalid = false;\n\t\t\tthis.app.log('error', 'You must define a Template or TemplateUrl');\n\t\t}\n\n\t\tif (o.template !== null && (!(o.template instanceof HTMLElement) || typeof o.template !== \"string\")) {\n\t\t\tvalid = false;\n\t\t\tthis.app.log('error', 'Template set to unknown type', '\"' + typeof o.template + '\"');\n\t\t}\n\n\t\tif (o.templateUrl !== null && typeof o.templateUrl !== \"string\") {\n\t\t\tvalid = false;\n\t\t\tthis.app.log('error', 'TemplateUrl set to unknown type', '\"' + typeof o.templateUrl + '\"');\n\t\t}\n\n\t\t// TODO: Finish\n\n\t\treturn valid;\n\t};\n\n\t/**\n\t * Store the template\n\t */\n\tPanel.prototype._storeTemplate = function () {\n\t\tif (this.options.templateUrl !== null) {\n\t\t\tvar req = new XMLHttpRequest(),\n\t\t\t\tself = this;\n\t\t\treq.open('GET', this.options.templateUrl, true);\n\t\t\treq.onload = function () {\n\t\t\t\tif (req.status >= 200 && req.status < 400) {\n\t\t\t\t\t// TODO: Get template (& logic) from file\n\t\t\t\t\tself.template = document.createElement(self.options.tag);\n\t\t\t\t\tself.template.innerHTML = req.responseText;\n\t\t\t\t} else {\n\t\t\t\t\tself.app.log('error', \"Unable to load template file:\", self.options.templateUrl);\n\t\t\t\t}\n\t\t\t};\n\t\t\treq.send();\n\t\t} else {\n\t\t\tthis.template = document.createElement(this.options.tag);\n\t\t\tthis.template.innerHTML = this.options.template;\n\t\t}\n\t};\n\n\t// Panel Events\n\t// Open\n\tPanel.prototype.onOpen = function () {\n\t\t// Ensure we have a template\n\t\tif (typeof this.template === \"undefined\")\n\t\t\tthis._storeTemplate();\n\n\t\tif (this.template) {\n\t\t\tvar parent = this.options.parentEl ? this.options.parentEl : this.app.options.baseEl;\n\n\t\t\tif (this.options.append) {\n\t\t\t\tparent.innerHTML += this.template.innerHTML;\n\t\t\t} else if (this.options.appendChild) {\n\t\t\t\tif (parent.getElementsByTagName('panel-output')) {\n\t\t\t\t\tparent.getElementsByTagName('panel-output')[0].appendChild(this.template);\n\t\t\t\t} else {\n\t\t\t\t\tparent.appendChild(this.template);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// TODO: Store currently open panel (allow for multiple levels (based off route) -1 means ignore (i.e. modals))\n\t\t\t\t// this.app.panels[currentLevel].close(); // Loop through children and close them first\n\t\t\t\tparent.innerHTML = this.template.innerHTML;\n\t\t\t}\n\n\t\t\tif (typeof this.logic.onOpen === \"function\")\n\t\t\t\tthis.logic.onOpen();\n\t\t}\n\t};\n\n\t// Close\n\tPanel.prototype.onClose = function () {\n\t\tif (typeof this.logic.onClose === \"function\")\n\t\t\tthis.logic.onClose();\n\t};\n\n\t// Panel Controls\n\tPanel.prototype.open = function () {\n\t\tthis.onOpen();\n\t};\n\n\tPanel.prototype.close = function () {\n\t\tthis.onClose();\n\t};\n\n\t// Add to Panels\n\tPanels.prototype.Panel = Panel;\n\n\t// Export\n\twindow.Panels = Panels;\n\n})(window);"],"sourceRoot":"/source/"}